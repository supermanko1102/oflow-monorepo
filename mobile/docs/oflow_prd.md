# OFlow 行動應用產品需求文件（PRD）

## 一、背景與目標

- **產品定位**：OFlow 為台灣中小商家打造的智慧訂單管理工具，協助業主整合 LINE 訂單、AI 自動解析與提醒。
- **主要目標**
  - 降低手動整理 LINE 訂單的時間成本。
  - 提升訂單處理準確率，降低遺漏或延遲。
  - 建立團隊協作流程，支援多成員共用。
- **商業指標**
  - 首次上線後 3 個月內，月活活躍商家達 500 家。
  - 自動提醒點擊率 ≥ 60%，訂單完成率提升 20%。

## 二、使用者角色（Persona）

1. **店主 Amy（主要使用者）**
   - 30–45 歲，經營 LINE 為主的手作甜品店。
   - 需求：快速整理 LINE 訂單、追蹤客戶取貨時間。
   - 痛點：手動抄寫、忘記提醒、客戶資訊難以管理。
2. **店員 Ben（協作成員）**
   - 兼職人員，需掌握每日訂單狀態與提醒。
   - 需求：清楚知道待處理訂單與待提醒客戶。
3. **顧問 Claire（經營顧問）**
   - 協助多間店家管理營運數據。
   - 需求：快速切換團隊、掌握訂單進度與表現。

## 三、需求與功能優先順序

| 優先層級 | 功能模組       | 描述                                   | 成功指標                               |
| -------- | -------------- | -------------------------------------- | -------------------------------------- |
| P0       | 多提供者登入   | 支援 LINE、Apple 登入，顯示登入狀態    | 近 100% 登入成功率，《LINE》為主要入口 |
| P0       | 訂單列表與詳情 | 顯示 AI 解析訂單、可篩選狀態、檢視對話 | 使用率 ≥ 80%，平均每天檢視 5 次        |
| P0       | AI 智慧提醒    | 自動分類 7/3/當日提醒，支援標記完成    | 提醒完成率 ≥ 60%                       |
| P1       | 產品目錄管理   | 建立與編輯商品，供 AI 建議             | 商品同步率 ≥ 70%                       |
| P1       | 團隊協作       | 成員管理、角色權限                     | 團隊人數 ≥ 3 人/平均                   |
| P2       | 數據分析       | 訂單趨勢、提醒成功率                   | 使用率 ≥ 40%                           |

## 四、詳細功能需求

### 1. 認證模組

- LINE、Apple 登入流程需串接 Supabase Edge Functions。
- 顯示登入方式與當前選擇的團隊。
- 支援自動登入與 Session 驗證，失效時提醒重新登入。

### 2. 訂單管理

- 列表顯示：客戶名稱、訂單號、取貨日期、金額、AI 模式標籤。
- 篩選條件：全部、待處理、已完成、已取消；可依 AI 模式（全自動/半自動）。
- 詳情：顯示完整明細、備註、LINE 對話、操作紀錄。
- 操作：標記完成/取消、指派成員、聯絡客戶（快速開啟 LINE）。

### 3. 智慧提醒

- 自動分類提醒清單：今日 / 3 日內 / 7 日內。
- 每筆提醒需顯示訂單摘要、剩餘時間、優先順序。
- 支援存為完成、跳過（需提出原因）。
- 推播整合：預設提醒於每日 9:00，加上客製化時間。

### 4. 團隊與設定

- 團隊列表、邀請碼產生與掃描。
- 成員權限：擁有者、管理者、成員；控制資料存取與操作。
- 通知設定：可調整提醒頻率、推播開關。
- 模式切換：全自動 / 半自動，說明差異與影響。

## 五、非功能性需求

- **效能**：主要列表頁面載入 < 2 秒，列表滑動保持 60fps。
- **可靠性**：API 失敗需顯示明確錯誤訊息並提供重試。
- **安全性**：所有 API 採取 JWT 驗證，遵守 RLS（Row Level Security）。
- **可維護性**：採用模組化服務層，支援新的擴充功能。
- **在地化**：預設繁體中文，可快速擴充多語系。

## 六、驗收標準（Acceptance Criteria）

1. 登入成功後自動導向主頁，未登入時阻擋進入主畫面。
2. 訂單列表支援篩選、排序，並正確顯示 AI 模式與狀態。
3. 點擊提醒可導向訂單詳情，提醒狀態變更同步更新列表。
4. 團隊成員調整權限需立即生效，並同步到其他成員裝置。
5. 對於 API 逾時或錯誤，顯示本地化錯誤訊息並寫入錯誤紀錄。

## 七、風險與對策

- **AI 解析錯誤**：提供人工覆核流程與錯誤回報機制。
- **推播失敗**：建立通知失敗的備援提醒（例如簡訊或 Email）。
- **多團隊管理複雜**：在 UI 上提供清楚的團隊切換提示。
- **法規合規**：確保資料存取符合個資法，提供刪除帳號流程。

## 八、推出計畫

- **MVP**：完成登入、訂單管理、提醒功能（P0）。
- **Beta 測試**：邀請 50 家商家試用，蒐集意見。
- **正式上線**：優化性能、加入產品目錄與團隊協作（P1 功能）。

## 九、後續延伸

- 離線模式與同步佇列。
- 訂單 CSV/Excel 匯出。
- 客戶管理（CRM）與再行銷工具。
- LINE 官方帳號深度整合（自動回覆腳本）。
